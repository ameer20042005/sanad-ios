# قيود وضع الضيف - Guest Mode Restrictions

## التغييرات المطبقة

تم منع الضيوف (المستخدمين غير المسجلين) من إرسال طلبات التبرع بالدم لضمان جودة البيانات والمصداقية.

### الملفات المعدلة:

#### 1. `app/blood-donation-form.tsx`
- **إضافة**: فحص وضع الضيف عند تحميل الصفحة
- **إضافة**: فحص وضع الضيف عند محاولة إرسال الطلب
- **النتيجة**: يتم توجيه الضيف لتسجيل الدخول أو إنشاء حساب

```typescript
// عند التحميل
useEffect(() => {
  if (isGuest) {
    Alert.alert(
      'تسجيل الدخول مطلوب',
      'لإرسال طلب تبرع دم، يجب عليك تسجيل الدخول...',
      [...]
    );
  }
}, [isGuest]);

// عند الإرسال
const handleSubmit = async () => {
  if (isGuest) {
    Alert.alert(...);
    return;
  }
  // باقي الكود
}
```

#### 2. `app/(tabs)/index.tsx`
- **إضافة**: دالة `handleDonationRequest` تفحص وضع الضيف
- **النتيجة**: عند الضغط على زر "طلب تبرع دم"، يتم فحص حالة المستخدم أولاً

```typescript
const handleDonationRequest = () => {
  if (isGuest) {
    Alert.alert(...);
  } else {
    router.push('/blood-donation-form');
  }
};
```

## ما يمكن للضيوف فعله:

✅ **مسموح:**
- تصفح الصفحة الرئيسية
- قراءة شروط التبرع
- البحث عن متبرعين
- مشاهدة طلبات التبرع الحالية
- مشاهدة الحملات

❌ **ممنوع:**
- إرسال طلبات تبرع جديدة
- الوصول للملف الشخصي
- تعديل البيانات

## رسائل التنبيه:

عند محاولة الضيف إرسال طلب تبرع، يظهر له تنبيه يحتوي على:
1. **الرسالة**: "لإرسال طلب تبرع دم، يجب عليك تسجيل الدخول أو إنشاء حساب جديد"
2. **الخيارات**:
   - إلغاء
   - تسجيل الدخول
   - إنشاء حساب

## الفوائد:

1. **جودة البيانات**: ضمان أن جميع الطلبات مرتبطة بمستخدمين حقيقيين
2. **المتابعة**: إمكانية التواصل مع صاحب الطلب
3. **المصداقية**: تقليل الطلبات الوهمية
4. **الإحصائيات**: تتبع دقيق لطلبات كل مستخدم

## اختبار الميزة:

1. افتح التطبيق كضيف (اضغط "المتابعة كضيف")
2. حاول الوصول لصفحة طلب التبرع من:
   - زر "طلب تبرع دم" في الصفحة الرئيسية
   - الوصول المباشر للصفحة
3. يجب أن يظهر تنبيه يطلب تسجيل الدخول
4. اختر "تسجيل الدخول" أو "إنشاء حساب"
5. بعد تسجيل الدخول، يمكنك إرسال طلبات التبرع

## ملاحظات:

- التغييرات متوافقة مع النظام الحالي للمصادقة بالهاتف
- لا تؤثر على المستخدمين المسجلين
- تحسن تجربة المستخدم بتوجيهه للخطوات الصحيحة
